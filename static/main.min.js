function resetBoard(){Array.prototype.slice.call(document.getElementsByClassName("col")).forEach(function(a){a.textContent=""});board=initBoard(),finish=!1,moveCount=0}function makeMove(a,b,c,d){var e=b[0],f=b[1];a[e][f]=c,d||(document.getElementById("col"+e+f).textContent=c)}function getMoveFromBoxId(a){return[parseInt(a[3]),parseInt(a[4])]}function makeOpponentMove(){moveCount++,temp_score_move_temp=getMaxMove(board,"X"),move_t=temp_score_move_temp[1],makeMove(board,move_t,"X",!1),getIsWin(board,"X")?(alert("PC won"),finish=!0):9==moveCount&&alert("Draw")}function initBoard(){for(var a=[],b=0;3>b;b++){for(var c=[],d=0;3>d;d++)c.push("0");a.push(c)}return a}function getIsWin(a,b){var c,d,e=null;for(c=0;3>c;c++){for(e=!0,d=0;3>d;d++)if(a[c][d]!=b){e=!1;break}if(e)return!0}for(d=0;3>d;d++){for(e=!0,c=0;3>c;c++)if(a[c][d]!=b){e=!1;break}if(e)return!0}return a[0][0]==b&&a[1][1]==b&&a[2][2]==b?!0:a[2][0]==b&&a[1][1]==b&&a[0][2]==b?!0:!1}function getCopy(a){for(var b=initBoard(),c=0;3>c;c++)for(var d=0;3>d;d++)b[c][d]=a[c][d];return b}function getMoveList(a){for(var b=[],c=0;3>c;c++)for(var d=0;3>d;d++)"0"==a[c][d]&&b.push([c,d]);return b}function flip(a){return"X"==a?"O":"X"}function boardIsFull(a){for(var b=0;3>b;b++)for(var c=0;3>c;c++)if("0"==a[b][c])return!1;return!0}function getMinMove(a,b){for(var c,d=getMoveList(a),e=1,f=0;f<d.length;f++){var g=d[f],h=getCopy(a);if(makeMove(h,g,b,!0),getIsWin(h,b)){e=-1,win_move=g;break}if(boardIsFull(h))c=0;else{var i=getMaxMove(h,flip(b));c=i[0]}e>c&&(e=c)}return e}function getMaxMove(a,b){for(var c=getMoveList(a),d=null,e=-1,f=0;f<c.length;f++){var g=c[f],h=getCopy(a);if(makeMove(h,g,b,!0),getIsWin(h,b)){e=1,d=g;break}boardIsFull(h)?score=0:score=getMinMove(h,flip(b)),score>e&&(e=score,d=g)}return[e,d]}var board=null,finish=!1,moveCount=0;window.onload=function(){resetBoard(),document.getElementById("play-again").addEventListener("click",function(a){a.preventDefault(),resetBoard()},!1);Array.prototype.slice.call(document.getElementsByClassName("col")).forEach(function(a){a.addEventListener("click",function(a){if(a.preventDefault(),!finish){var b=document.getElementById(this.id);b.textContent?alert("This box is already filed. Try another one!"):(moveCount++,move_t=getMoveFromBoxId(this.id),makeMove(board,move_t,"O",!1),getIsWin(board,"O")?alert("Winner is user"):9==moveCount?alert("Draw"):makeOpponentMove())}},!1)})};